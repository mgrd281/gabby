# دليل المشروع النهائي: منظم جهد 16 مرحلة (Gabby System)
> **Universal Arduino-Based Voltage Stabilizer 16-Stage**

هذا الدليل يلخص كل الخطوات اللازمة لتحويل لوحة المنظم القديمة (Alhdara) للعمل بشريحة أردوينو ونظام ذكي جديد.

## 1. المميزات الجديدة (Update v2.0)
- **نطاق أوسع:** يعمل من جهد منخفض جداً وحتى **300 فولت** (بفضل معادلة -80V Offset).
- **حماية ذكية:** ريليه خامس للحماية يفصل الحمل فوراً إذا زاد الخرج عن 250 فولت.
- **مؤقت أمان:** يعيد ضبط نفسه (5 ثواني) عند حدوث أي خطأ.
- **واجهة محمية:** نظام المحاكاة محمي بكلمة مرور.

## 2. التوصيلات (Wiring Map)
يجب إزالة المعالج القديم وتوصيل الأردوينو (Nano/Uno/Pro Mini) بالكيفية التالية بأسلاك صغيرة (Jumpers):

| الوظيفة | رجل الأردوينو (Arduino Pin) | مكان التوصيل في اللوحة |
| :--- | :--- | :--- |
| **Input Volts** | `A0` | خرج مقسم الجهد (المقاومة المتغيرة) الخاصة بالفولت. |
| **Current Sense** | `A1` | خرج دائرة LM358 (انظر المخطط المرفق). |
| **Relay 1 (+10V)** | `D2` | قاعدة ترانزستور الريليه الأول (Buck/Boost). |
| **Relay 2 (+20V)** | `D3` | قاعدة ترانزستور الريليه الثاني. |
| **Relay 3 (+40V)** | `D4` | قاعدة ترانزستور الريليه الثالث. |
| **Relay 4 (+80V)** | `D5` | قاعدة ترانزستور الريليه الرابع. |
| **Protection Relay**| `D6` | **(جديد)** ريليه الخرج الرئيسي (Safety Cutoff). |
| **Disp Clock** | `A5` | خط الـ Clock الذاهب للشاشات (TM1680). |
| **Disp Data** | `A4` | خط الـ Data الذاهب للشاشات (TM1680). |
| **Power** | `5V, GND` | مصدر تغذية 5 فولت ثابت. |

## 3. المعايرة (Calibration)
بعد تجميع الجهاز، ستحتاج لضبط الدقة:
1. صل الجهاز بالكهرباء.
2. قس الجهد بساعة فحص (Multimeter).
3. افتح الكود `stabilizer.ino`.
4. عدل القيم التالية في بداية الكود:
   ```cpp
   float VOLTAGE_CALIBRATION = 0.50; // غير هذا الرقم حتى يطابق الفولت الحقيقي
   float CURRENT_CALIBRATION = 0.15; // غير هذا الرقم حتى يطابق الأمبير الحقيقي
   ```
5. ارفع الكود مرة أخرى.

## 4. المحاكاة (Simulation)
الملف `index.html` يحتوي على محاكاة مطابقة تماماً للكود.
- **الرابط المرفوع:** [https://github.com/mgrd281/gabby](https://github.com/mgrd281/gabby)
- **كلمة المرور:** `Gabby2026`

## 5. نصائح السلامة
> [!WARNING]
> **خطر الكهرباء:** الجهاز يعمل على 220 فولت. لا تلمس أي جزء من اللوحة أثناء التشغيل. يفضل التجربة الأولية على محول 12 فولت آمن لفحص حركة الريليهات والشاشة قبل التوصيل بالكهرباء الرئيسية.
